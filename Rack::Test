ENV['RACK_ENV'] = 'test'

require './todo_list.rb'
require 'test/unit'
require 'rack/test'

class ToDoListTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    Sinatra::Application
  end

  def test_it_says_welcome_to_todo_list
    get '/'
    assert last_response.ok?
    assert last_response.body.include?('WELCOME TO YOUR TO DO LIST')
  end

  def test_it_adds_an_item_to_the_list
    get '/', :add_item => 'test'
    assert last_response.body.include?('test')
  end

  def test_it_will_edit_an_item_in_the_list
    get '/', :find => 'test', :edit => 'passed'
    assert last_response.body.include?('passed')
  end

  def test_it_will_mark_an_item_as_complete
    get '/', :complete => 'passed'
    assert last_response.body.include?('complete')
  end

  def test_it_will_store_more_than_one_action
    get '/', :add_item => 'cuppa'
    assert last_response.body.include?('cuppa')
  end

  def test_filter_by_all_will_display_all_items_in_list
    get '/', :all => 'all'
    assert last_response.body.include?('test')
    assert last_response.body.include?('cuppa')
  end

end
